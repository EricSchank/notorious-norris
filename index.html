<!DOCTYPE html>
<html>
<head>
  <title>Notorious Norris</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://spiceworks.github.io/spiceworks-js-sdk/dist/spiceworks-sdk.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment-with-locales.min.js" type="text/javascript"></script>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/css/materialize.min.css">
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.3/js/materialize.min.js"></script>
  <style>
    .chuck-stuff {
      overflow: hidden;
    }
    .chuck-stuff .chuck-image {
      margin-left: 20px;
    }
    .chuck-stuff .chuck-image img, .image-credit{
      max-width: 250px;
      max-height: 250px;
    }
    .image-credit {
      display: block;
      color: #CCC;
    }
  </style>
</head>
<body>

  <h2>Notorious Norris</h2>

  <button class="next_joke waves-effect waves-light btn brown darken-2">
    <i class="material-icons right">skip_next</i> Next Joke
  </button>
  <div class="chuck-stuff">
    <div class="right chuck-image">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Chuck_Norris%2C_The_Delta_Force_1986_-_downsampled.jpg/1024px-Chuck_Norris%2C_The_Delta_Force_1986_-_downsampled.jpg">
      <a class="image-credit" target="_blank" href="#"></a>
    </div>
    <h3 id="chucky">Loading joke....</h3>
  </div>

<script type="text/javascript">
var getJoke = function(){
  var icndb = 'http://api.icndb.com/jokes/random?exclude=[explicit]';
  var images = [
    {
      src: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Chuck_Norris%2C_The_Delta_Force_1986_-_downsampled.jpg/1024px-Chuck_Norris%2C_The_Delta_Force_1986_-_downsampled.jpg',
      author: 'Tomer T'},
    {
      src: 'https://upload.wikimedia.org/wikipedia/commons/2/2d/NorrisCrop.jpg',
      author: 'Craig Michaud'},
    {
      src: 'https://upload.wikimedia.org/wikipedia/commons/5/5c/Chuck_Norris.jpg'},
    {
      src: 'https://upload.wikimedia.org/wikipedia/commons/3/30/Chuck_Norris_May_2015.jpg'},
    {
      src: 'https://upload.wikimedia.org/wikipedia/commons/e/e1/Chuck_Norris_%281976%29.jpg',
      author: 'Alan Light'},
    {
      src: 'https://upload.wikimedia.org/wikipedia/commons/3/3e/Chuck_Norris_2007_%28cropped%29.jpg'}
  ];

  $.getJSON(icndb, function(data){
    var joke = data['value']['joke'];
    $('#chucky').html(joke);
    var r = Math.floor( Math.random() * images.length );
    $('.chuck-image img').attr('src', images[r].src);
    $('.image-credit').attr('href', images[r].src);
    if(images[r].author) {
      $('.image-credit').text('Photo: '+images[r].author).show();
    } else {
      $('.image-credit').text('').hide();
    }
  });
};

$('document').ready(function() {
  getJoke();
  $('.next_joke').on('click', getJoke);
});
</script>

</body>
</html>
